─ Worked for 37m 03s ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

• Summary
  Stabilized IssueOps so it only validates/persists requests and leaves Pages deploy to the dedicated workflow, added workflow invariants tests, updated docs/
  template copy, and added Pages job timeouts to avoid stuck runs. Version stays on a z‑bump (1.11.1) per repo rules.

  Confirmed Root Causes

  - Double deploy race: both .github/workflows/location_request.yml and .github/workflows/pages.yml were deploying GitHub Pages (upload + deploy), causing
    competing deployments and github-pages environment contention.
  - Duplicate triggers: .github/workflows/location_request.yml included issues: edited, which can requeue the same request on minor edits/label churn.

  What Changed (And Why)

  - Removed Pages deploy responsibilities from IssueOps so only pages.yml deploys: .github/workflows/location_request.yml.
  - Ensured IssueOps triggers only on opened and labeled, plus clear rerun guidance: .github/workflows/location_request.yml, .github/ISSUE_TEMPLATE/
    location_request.yml, README.md.
  - Added workflow invariant tests so these guarantees stay enforced: tests/test_workflow_invariants.py.
  - Added timeouts to avoid indefinite Pages hangs: .github/workflows/pages.yml.
  - Kept z‑bump only (1.11.1) and no changelog update: pyproject.toml, src/satpass/__init__.py.

  Tests/Validation Run

  - make dev
  - make lint
  - make test
  - make seed
  - rm -rf site && make build (timed out at 120s and 240s; succeeded with a 600s timeout)
  - make catalog
  - make serve (background)
  - curl -fsS http://127.0.0.1:8000/feeds/index.json | python3 -m json.tool
  - curl -fsS http://127.0.0.1:8000/feeds/new-york--popular.ics | head (curl exits 23 because head closes the pipe)
  - make smoke (timed out at 240s and 600s while running the initial make build in scripts/smoke.sh)

  Notes

  - Untracked file remains: data/requests.sqlite (created during local runs). Tell me if you want it removed.

  Next Steps (Pick One)

  1. Re-run make smoke with a longer timeout or a tuned SMOKE_PORT and cached TLEs if you want a clean smoke pass.
  2. Remove the untracked data/requests.sqlite if you want a pristine working tree.



